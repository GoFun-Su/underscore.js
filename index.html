<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	
</body>
<script type="text/javascript" src="analyze.js"></script>
<script type="text/javascript">
	/*function Person (name){
		this.name = name;
	}
	Person.prototype.setName = function(name) {
		this.name = name;
	}
	Person.prototype.getName = function() {
		return this.name;
	}

	function Teacher(){

	}
	Teacher.prototype = new Person();
	Teacher.prototype.setName = function(name) {
		this.name = "23"
	}
	Teacher.prototype.getName = function(name) {
		return this.name;
	}

	var p = new Teacher();
	p.setName("wee");
	alert(p.getName())*/

	/*function List() {
		this.list = [];
	}
	List.prototype.add= function(o) {
		this.list.push(o);
	};
	List.prototype.count= function() {
		return this.list.length;
	};

	List.prototype.get = function(index) {
		if (index>-1 && index < this.list.length) {
			return this.list[index]
		}
	}
	List.prototype.indexOf = function(obj,startIndex){
		var i = startIndex;
		while(i < this.list.length) {
			if (this.list[i] === obj) {
				return i;
			}
			i ++;
		}
		return -1;
	}

	List.prototype.remove = function(index) {
		this.subscriberList.splice(index,1);
	}


	function Item() {
		this.objs = new List();
	}

	Item.prototype.addList = function(o){
		this.objs.add(o);
	}
	
	Item.prototype.setContext = function(text) {
		this.context = text;
		this.notify();
	}
	Item.prototype.notify = function(){
		let count = this.objs.count();
		for(var i = 0; i < count; i ++) {
			this.objs.get(i).update(this.context); //observerList[i].update(this.state);
		}
	}
	
	function Sub() {
		this.update = function(data){
                  console.log(data);
            };
		}

	var p1 = new Sub();
	var p2 = new Sub();
	var o = new Item();
	o.addList(p1);
	o.addList(p2);
	o.setContext("这是第一条订阅的消息") //更新消息并发布
	pb1.update = function(data) {
		console.log("订阅消息"+data)
	}

 	pb2.update = function(data) {
 		console.log("订阅消息"+data)
 	}*/

 	/*var shallowProperty = function(key) {
       return function(obj) {
          return obj == null ? void 0 : obj[key];
        };
    };
    var getLength = shallowProperty('length');

   
    console.log(getLength(
    	function name(na){}
    	)
    )
    var p = function name(na){}
    	console.log(p["length"])*/
    var _ = {};
    _.map = _.collect = function(obj, iteratee, context) {
    	//根据不同的iteratee类型，执行不同的函数，如果iteratee是函数的时候，和_.each是一样的
    	//iteratee = optimizeCb(value, context, argCount)
        iteratee = optimizeCb(iteratee, context);
        //不是类数组是对象的话，将对象的key存入keys数组里面
        var keys =  _.keys(obj),
        //key存在的情况下，是对象获取keys数组的length,否则是数组，获取数组的长度
        length = (keys || obj).length,
        //长度为length的数组
        results = Array(length);
        for (var index = 0; index < length; index++) {
        	//对象为key,数组为索引
          var currentKey = keys ? keys[index] : index;
          results[index] = iteratee(obj[currentKey], currentKey, obj);
        }
        //返回最后的结果
        return results;
    };
     _.keys = function(obj) {
    	var keys = [];
    	for (var key in obj)  keys.push(key);
    	
   	 	return keys;
  };

    var optimizeCb = function(func, context, argCount) {
    	if (context === void 0) return func;
    	switch (argCount) {
      		case 1: return function(value) {
        		return func.call(context, value);
      		};
      
      		case null:
      		case 3: return function(value, index, collection) {
        		return func.call(context, value, index, collection);
      		};
      		case 4: return function(accumulator, value, index, collection) {
        		return func.call(context, accumulator, value, index, collection);
      		};
    	}
    	return function() {
      		return func.apply(context, arguments);
    	};
  };
    
    _.map([1,2,3],function iteratee(num,key){console.log(key)})
</script>
</html>