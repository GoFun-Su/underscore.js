<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	
</body>
<script type="text/javascript" src="analyze.js"></script>
<script type="text/javascript">
	/*function Person (name){
		this.name = name;
	}
	Person.prototype.setName = function(name) {
		this.name = name;
	}
	Person.prototype.getName = function() {
		return this.name;
	}

	function Teacher(){

	}
	Teacher.prototype = new Person();
	Teacher.prototype.setName = function(name) {
		this.name = "23"
	}
	Teacher.prototype.getName = function(name) {
		return this.name;
	}

	var p = new Teacher();
	p.setName("wee");
	alert(p.getName())*/

	/*function List() {
		this.list = [];
	}
	List.prototype.add= function(o) {
		this.list.push(o);
	};
	List.prototype.count= function() {
		return this.list.length;
	};

	List.prototype.get = function(index) {
		if (index>-1 && index < this.list.length) {
			return this.list[index]
		}
	}
	List.prototype.indexOf = function(obj,startIndex){
		var i = startIndex;
		while(i < this.list.length) {
			if (this.list[i] === obj) {
				return i;
			}
			i ++;
		}
		return -1;
	}

	List.prototype.remove = function(index) {
		this.subscriberList.splice(index,1);
	}


	function Item() {
		this.objs = new List();
	}

	Item.prototype.addList = function(o){
		this.objs.add(o);
	}
	
	Item.prototype.setContext = function(text) {
		this.context = text;
		this.notify();
	}
	Item.prototype.notify = function(){
		let count = this.objs.count();
		for(var i = 0; i < count; i ++) {
			this.objs.get(i).update(this.context); //observerList[i].update(this.state);
		}
	}
	
	function Sub() {
		this.update = function(data){
                  console.log(data);
            };
		}

	var p1 = new Sub();
	var p2 = new Sub();
	var o = new Item();
	o.addList(p1);
	o.addList(p2);
	o.setContext("这是第一条订阅的消息") //更新消息并发布
	pb1.update = function(data) {
		console.log("订阅消息"+data)
	}

 	pb2.update = function(data) {
 		console.log("订阅消息"+data)
 	}*/

 	/*var shallowProperty = function(key) {
       return function(obj) {
          return obj == null ? void 0 : obj[key];
        };
    };
    var getLength = shallowProperty('length');

   
    console.log(getLength(
    	function name(na){}
    	)
    )
    var p = function name(na){}
    	console.log(p["length"])*/
   /* reduce函数解析
   var _ = {};
      _.keys = function(obj) {
    
    var keys = [];
    	for (var key in obj) keys.push(key);
    	return keys;
  	};
    var optimizeCb = function(func, context, argCount) {
    	if (context === void 0) return func;
    	switch (argCount) {
      		case 1: return function(value) {
        		return func.call(context, value);
      		};
      
      		case null:
      		case 3: return function(value, index, collection) {
        		return func.call(context, value, index, collection);
      		};
      		case 4: return function(accumulator, value, index, collection) {
        		return func.call(context, accumulator, value, index, collection);
      		};
    	}
    	return function() {
      		return func.apply(context, arguments);
    	};
  };
    var createReduce = function(dir) {
        var reducer = function(obj, iteratee, memo, initial) {
            length = obj.length,
          
            index = dir > 0 ? 0 : length - 1;
            
            //依次循环
            for (; index >= 0 && index < length; index += dir) {
                var currentKey = index;
                memo = iteratee(memo, obj[currentKey], currentKey, obj);
                console.log(memo)
            }

            return memo;
        };

        return function(obj, iteratee, memo, context) {
            var initial = arguments.length >= 3;
            return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);
        };
    };
     _.reduce = createReduce(-1);
     var list = [[0, 1], [2, 3], [4, 5]];
	var flat = _.reduce(list, function(a, b) { return a.concat(b); }, []);*/
	
  	var _ = {};
  	 _.isArray = function(obj) {
    		return toString.call(obj) === '[object Array]';
  	};
	var isArrayLike = function(collection) {
    		var length = getLength(collection);
    		return typeof length == 'number' && length >= 0;
  	};
  	 var shallowProperty = function(key) {
    		return function(obj) {
      		return obj == null ? void 0 : obj[key];
    };
  };
  var getLength = shallowProperty('length');
  
  	_.property = function(path) {
    if (!_.isArray(path)) {
      return shallowProperty(path);
    }
  
  };
  	_.pluck = function(obj, key) {
    	return _.map(obj, _.property(key));
  	};

  	  _.map = _.collect = function(obj, iteratee, context) {
    		var keys = !isArrayLike(obj) && _.keys(obj),
        	length = (keys || obj).length,
        	results = Array(length);
    		for (var index = 0; index < length; index++) {
      				var currentKey = keys ? keys[index] : index;
      				results[index] = iteratee(obj[currentKey], currentKey, obj);
    		}
    		return results;

  	};
  
  _.keys = function(obj) {
    var keys = [];
    for (var key in obj) keys.push(key);
    return keys;
  };

     _.sortBy = function(obj, iteratee, context) {
        var index = 0;
      
        return _.pluck(_.map(obj, function(value, key, list) {
            return {
                value: value,
                index: index++,
                criteria: iteratee(value, key, list)
            };
        }).sort(function(left, right) {
              var a = left.criteria;
              var b = right.criteria;
              if (a !== b) {
                  if (a > b || a === void 0) return 1;
                  if (a < b || b === void 0) return -1;
              }
              
              return left.index - right.index;
        }), 'value');
    };
var stooges = [{name: 'moe', age: 40}, {name: 'larry', age: 50}, {name: 'curly', age: 60}];

   
</script>
</html>